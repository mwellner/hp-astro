---
import i18next, { changeLanguage } from "i18next";
import BlogPost from "../../components/BlogPost.astro";
import PageLayout from "../../layouts/PageLayout.astro";

changeLanguage("en");

const allPosts = await Astro.glob("../../pages/**/*.mdx");
const pageTitle = "Blog";
---

<PageLayout pageTitle={pageTitle}>
  <ul>
    {
      allPosts
        .filter((post) => post.frontmatter.language == i18next.language)
        .map((post) => (
          <BlogPost url={post.url} title={post.frontmatter.title} />
        ))
    }
  </ul>
</PageLayout>
